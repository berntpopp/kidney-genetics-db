---
phase: "05"
plan: "05-02"
title: "Gene info components migration (8 files + GeneInformationCard)"
wave: 2
depends_on: ["05-01"]
files_modified:
  - "frontend/src/components/gene/GeneBasicInfo.vue"
  - "frontend/src/components/gene/GeneConstraints.vue"
  - "frontend/src/components/gene/GeneExpression.vue"
  - "frontend/src/components/gene/GenePhenotypes.vue"
  - "frontend/src/components/gene/MousePhenotypes.vue"
  - "frontend/src/components/gene/ClinVarVariants.vue"
  - "frontend/src/components/gene/ProteinInteractions.vue"
  - "frontend/src/components/gene/GeneInformationCard.vue"
autonomous: true
estimated_minutes: 60
requirements:
  - "GENE-01: All gene info components use Badge + Tooltip instead of v-chip + v-tooltip"
  - "GENE-02: GeneInformationCard uses Card + Avatar"
  - "GENE-03: All Vuetify utility classes replaced with Tailwind"

must_haves:
  truths:
    - "All 8 files have zero Vuetify component tags"
    - "All 8 files have zero Vuetify utility classes"
    - "`npm run build` succeeds"
    - "`npm run lint` has 0 errors"
    - "Gene information card renders with all sub-components"
    - "Color-coded badges display correctly for constraints, expression, phenotypes"
    - "Tooltips provide contextual information on hover"
  artifacts:
    - path: "frontend/src/components/gene/GeneInformationCard.vue"
      provides: "Card wrapper with Avatar header + 2-column annotation layout"
    - path: "frontend/src/components/gene/GeneConstraints.vue"
      provides: "Color-coded constraint badges (pLI, Z-scores)"

---

# 05-02: Gene Info Components Migration

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Migrate all 8 gene information sub-components from Vuetify chips/tooltips to shadcn-vue Badge/Tooltip.

**Architecture:** All 7 leaf components follow the same pattern: data display with color-coded chips and informational tooltips. Apply a uniform replacement pattern across all files.

---

## Universal Replacement Pattern

All gene info components follow this pattern:

### v-chip → Badge
```vue
<!-- BEFORE (Vuetify) -->
<v-chip :color="chipColor" size="small" class="mr-1">
  <v-icon start size="small">{{ icon }}</v-icon>
  {{ label }}
</v-chip>

<!-- AFTER (shadcn-vue) -->
<Badge
  variant="outline"
  class="mr-1"
  :style="{ backgroundColor: chipColor + '20', color: chipColor, borderColor: chipColor + '40' }"
>
  <component :is="icon" :size="12" class="mr-1" />
  {{ label }}
</Badge>
```

### v-tooltip → Tooltip
```vue
<!-- BEFORE (Vuetify) -->
<v-tooltip :text="tooltipText" location="bottom">
  <template #activator="{ props }">
    <span v-bind="props">{{ content }}</span>
  </template>
</v-tooltip>

<!-- AFTER (shadcn-vue) -->
<TooltipProvider>
  <Tooltip>
    <TooltipTrigger as-child>
      <span class="cursor-help">{{ content }}</span>
    </TooltipTrigger>
    <TooltipContent>{{ tooltipText }}</TooltipContent>
  </Tooltip>
</TooltipProvider>
```

### v-chip with tooltip wrapper
```vue
<!-- Combined chip + tooltip pattern (very common in these files) -->
<TooltipProvider>
  <Tooltip>
    <TooltipTrigger as-child>
      <Badge
        variant="outline"
        class="cursor-help"
        :style="{ backgroundColor: color + '20', color: color, borderColor: color + '40' }"
      >
        <component :is="icon" :size="12" class="mr-1" />
        {{ value }}
      </Badge>
    </TooltipTrigger>
    <TooltipContent class="max-w-xs">
      <p class="text-xs">{{ tooltipText }}</p>
    </TooltipContent>
  </Tooltip>
</TooltipProvider>
```

### Color mapping helper (preserve existing logic)
Keep all existing color computation functions (`getConstraintColor`, `getExpressionColor`, etc.) — just use the returned color string with Badge inline styles instead of Vuetify's `:color` prop.

For Vuetify named colors, map to hex:
| Vuetify Color | Hex |
|--------------|-----|
| `success` | `#22c55e` |
| `warning` | `#f59e0b` |
| `error` | `#ef4444` |
| `info` | `#3b82f6` |
| `primary` | `#0ea5e9` |
| `grey` | `#6b7280` |
| `orange` | `#f97316` |
| `teal` | `#14b8a6` |
| `purple` | `#8b5cf6` |
| `indigo` | `#6366f1` |

Or use CSS variables: `hsl(var(--primary))`, `hsl(var(--destructive))`, etc.

### Vuetify utility → Tailwind (per-component)
| Vuetify | Tailwind |
|---------|----------|
| `d-flex` | `flex` |
| `align-center` | `items-center` |
| `flex-wrap` | `flex-wrap` |
| `ga-2` | `gap-2` |
| `mb-2` | `mb-2` |
| `mr-1` / `mr-3` / `ml-3` | `mr-1` / `mr-3` / `ml-3` |
| `pa-2` | `p-2` |
| `text-caption` | `text-xs` |
| `text-medium-emphasis` | `text-muted-foreground` |
| `font-weight-medium` | `font-medium` |
| `font-mono` | `font-mono` |
| `inline-block` | `inline-block` |
| `align-middle` | `align-middle` |

---

<task id="1">
### Task 1: Migrate GeneBasicInfo.vue

**Files:** Modify `frontend/src/components/gene/GeneBasicInfo.vue`

**Vuetify to replace:** `v-tooltip` (1 instance wrapping MANE transcript info)

**Add imports:**
```typescript
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip'
```

**Replace the v-tooltip block** with the Tooltip pattern. Replace all Vuetify utility classes (`d-flex`, `align-center`, `flex-wrap`, `ga-2`, `mb-2`, `mr-3`, `font-weight-bold`, `text-body-1`, `text-medium-emphasis`, `font-mono`) with Tailwind equivalents.

**Commit:**
```bash
git add frontend/src/components/gene/GeneBasicInfo.vue
git commit -m "feat(05-02): migrate GeneBasicInfo to Tooltip + Tailwind"
```
</task>

<task id="2">
### Task 2: Migrate GeneConstraints.vue

**Files:** Modify `frontend/src/components/gene/GeneConstraints.vue`

**Vuetify to replace:** Multiple `v-chip` (3 constraint score chips) + `v-tooltip` wrappers.

**Add imports:**
```typescript
import { Badge } from '@/components/ui/badge'
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip'
import { Info } from 'lucide-vue-next'
```

**Pattern for each constraint chip:**
```vue
<TooltipProvider>
  <Tooltip>
    <TooltipTrigger as-child>
      <Badge
        variant="outline"
        class="cursor-help"
        :style="{ backgroundColor: getPliColor(pli) + '20', color: getPliColor(pli) }"
      >
        <Info :size="12" class="mr-1" />
        pLI: {{ pli.toFixed(2) }}
      </Badge>
    </TooltipTrigger>
    <TooltipContent class="max-w-xs">
      <p class="font-medium text-xs">pLI Score: {{ pli.toFixed(4) }}</p>
      <p class="text-xs text-muted-foreground">{{ getPliInterpretation(pli) }}</p>
    </TooltipContent>
  </Tooltip>
</TooltipProvider>
```

**Keep all color computation logic** (getPliColor, getZScoreColor, etc.).
**Replace all Vuetify utility classes** with Tailwind.

**Commit:**
```bash
git add frontend/src/components/gene/GeneConstraints.vue
git commit -m "feat(05-02): migrate GeneConstraints to Badge + Tooltip"
```
</task>

<task id="3">
### Task 3: Migrate GeneExpression + GenePhenotypes + MousePhenotypes

**Files:**
- `frontend/src/components/gene/GeneExpression.vue`
- `frontend/src/components/gene/GenePhenotypes.vue`
- `frontend/src/components/gene/MousePhenotypes.vue`

All 3 follow the same pattern as GeneConstraints — multiple `v-chip` + `v-tooltip` instances.

**For each file:**
1. Add imports for Badge, Tooltip, TooltipProvider, TooltipTrigger, TooltipContent
2. Replace each `v-chip` → Badge with inline style color
3. Replace each `v-tooltip` → Tooltip wrapper
4. Replace all Vuetify utility classes with Tailwind equivalents
5. Keep all color computation and data transformation logic unchanged

**GenePhenotypes special considerations:**
- Uses `v-chip` with multiple colors for clinical groups (complement, CAKUT, glomerulopathy, etc.)
- Keep the color mapping functions, use Badge inline styles

**MousePhenotypes special considerations:**
- Uses `v-chip` for zygosity breakdown (homozygous=error, heterozygous=warning, conditional=info)
- Keep color mapping, convert Vuetify color names to hex values

**Commit:**
```bash
git add frontend/src/components/gene/GeneExpression.vue frontend/src/components/gene/GenePhenotypes.vue frontend/src/components/gene/MousePhenotypes.vue
git commit -m "feat(05-02): migrate GeneExpression, GenePhenotypes, MousePhenotypes to Badge + Tooltip"
```
</task>

<task id="4">
### Task 4: Migrate ClinVarVariants + ProteinInteractions

**Files:**
- `frontend/src/components/gene/ClinVarVariants.vue`
- `frontend/src/components/gene/ProteinInteractions.vue`

**ClinVarVariants additional replacements:**
- `v-divider` → `<Separator />` or `<hr class="my-2 border-border" />`
- Has special inline styles for truncating variant display — preserve as Tailwind classes

**ProteinInteractions additional replacements:**
- Uses scoped styles for partner name highlighting — migrate to Tailwind or keep scoped CSS
- `v-chip` for PPI score, percentile, network degree, partner names

**Same pattern** as previous tasks: Badge + Tooltip + Tailwind utilities.

**Commit:**
```bash
git add frontend/src/components/gene/ClinVarVariants.vue frontend/src/components/gene/ProteinInteractions.vue
git commit -m "feat(05-02): migrate ClinVarVariants and ProteinInteractions to Badge + Tooltip"
```
</task>

<task id="5" depends_on="1,2,3,4">
### Task 5: Migrate GeneInformationCard.vue

**Files:** Modify `frontend/src/components/gene/GeneInformationCard.vue`

**Vuetify to replace:**
- `v-card` / `v-card-item` / `v-card-title` / `v-card-text` → Card + CardHeader + CardTitle + CardContent
- `v-avatar` → Avatar
- `v-btn` → Button (Structure button link)
- `v-row` / `v-col` → Tailwind grid
- `v-progress-circular` → Tailwind spinner
- `v-divider` → Separator

**Imports:**
```typescript
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Avatar, AvatarFallback } from '@/components/ui/avatar'
import { Button } from '@/components/ui/button'
import { Separator } from '@/components/ui/separator'
```

**Template pattern:**
```vue
<Card class="h-full">
  <CardHeader class="flex flex-row items-center gap-3 pb-2">
    <Avatar class="h-10 w-10 bg-primary/10">
      <AvatarFallback><Dna :size="20" class="text-primary" /></AvatarFallback>
    </Avatar>
    <div class="flex-1">
      <CardTitle class="text-base">Gene Information</CardTitle>
    </div>
    <Button v-if="gene" variant="outline" size="sm" :as="RouterLink" :to="`/genes/${gene.gene_symbol}/structure`">
      <Database :size="14" class="mr-1" />
      Structure
    </Button>
  </CardHeader>
  <CardContent>
    <!-- Loading state -->
    <div v-if="loadingAnnotations" class="flex items-center justify-center py-8">
      <div class="h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent" />
    </div>
    <!-- Content: two-column grid -->
    <div v-else-if="annotations" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Left: Constraints + Clinical -->
      <div class="space-y-4">
        <GeneConstraints v-if="gnomadData" :gnomad-data="gnomadData" />
        <Separator />
        <ClinVarVariants v-if="clinvarData" :clinvar-data="clinvarData" :gene-symbol="gene.gene_symbol" />
      </div>
      <!-- Right: Phenotypes + Interactions -->
      <div class="space-y-4">
        <GenePhenotypes v-if="hpoData" :hpo-data="hpoData" />
        <Separator />
        <MousePhenotypes v-if="mouseData" :mouse-data="mouseData" />
        <Separator />
        <ProteinInteractions v-if="stringPpiData" :string-ppi-data="stringPpiData" />
      </div>
    </div>
    <!-- Empty state -->
    <p v-else class="text-sm text-muted-foreground text-center py-4">
      No annotation data available
    </p>
  </CardContent>
</Card>
```

**Commit:**
```bash
git add frontend/src/components/gene/GeneInformationCard.vue
git commit -m "feat(05-02): migrate GeneInformationCard to Card + Avatar + Tailwind grid"
```
</task>

<task id="6" depends_on="5">
### Task 6: Verification

**Build + lint:**
```bash
cd frontend && npm run build && npm run lint
```

**Vuetify audit:**
```bash
grep -rE "v-chip|v-tooltip|v-card|v-avatar|v-btn|v-divider|v-row|v-col|v-progress-circular" \
  frontend/src/components/gene/ \
  --include="*.vue"
```
Expected: 0 matches.

**Utility class audit:**
```bash
grep -rE "d-flex|align-center|ga-[0-9]|text-caption|text-medium-emphasis|font-weight-" \
  frontend/src/components/gene/ \
  --include="*.vue"
```
Expected: 0 matches.

**Visual verification:**
- Navigate to any gene detail page
- Gene information card renders with 2-column layout
- Constraint badges show correct colors (red/orange/green)
- Expression badges show TPM values with appropriate colors
- Phenotype chips display clinical groups correctly
- All tooltips appear on hover with detailed information
</task>
