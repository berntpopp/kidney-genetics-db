---
phase: "07"
plan: "07-01"
title: "AdminStatsCard, DataSourceProgress, and AdminDashboard"
wave: 1
depends_on: ["06-01"]
files_modified:
  - "frontend/src/components/admin/AdminStatsCard.vue"
  - "frontend/src/components/DataSourceProgress.vue"
  - "frontend/src/views/admin/AdminDashboard.vue"
autonomous: true
estimated_minutes: 45
requirements:
  - "ADMIN-01: AdminStatsCard uses Card with Tailwind styling"
  - "ADMIN-02: DataSourceProgress uses Card + Collapsible + Progress"
  - "ADMIN-03: AdminDashboard uses Card grid with Tailwind"

must_haves:
  truths:
    - "shadcn-vue collapsible and toggle-group components are installed (if not already)"
    - "All 3 files have zero Vuetify component tags"
    - "`npm run build` succeeds"
    - "`npm run lint` has 0 errors"
    - "AdminDashboard shows stats cards and admin module grid"
    - "DataSourceProgress shows real-time pipeline progress via WebSocket"
  artifacts:
    - path: "frontend/src/components/admin/AdminStatsCard.vue"
      provides: "Card-based stat display with trend indicator"
    - path: "frontend/src/components/DataSourceProgress.vue"
      provides: "WebSocket-connected pipeline progress with collapsible details"
    - path: "frontend/src/views/admin/AdminDashboard.vue"
      provides: "Admin hub with stats and module navigation"

---

# 07-01: AdminStatsCard, DataSourceProgress, and AdminDashboard

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Migrate the admin foundation components — the stats card, pipeline progress, and dashboard hub.

---

<task id="1">
### Task 1: Install shadcn-vue collapsible (if not already)

```bash
ls frontend/src/components/ui/collapsible/ 2>/dev/null || (cd frontend && npx shadcn-vue@latest add collapsible)
```

**Commit if installed:**
```bash
git add frontend/src/components/ui/collapsible/
git commit -m "feat(07-01): install shadcn-vue collapsible"
```
</task>

<task id="2" depends_on="1">
### Task 2: Migrate AdminStatsCard.vue

**Files:** Modify `frontend/src/components/admin/AdminStatsCard.vue`

**Current:** Uses `v-card` with `:hover`, `@click`, `v-progress-circular`.

**Replace with:** A simple Card or styled div.

```vue
<template>
  <div
    class="rounded-lg border bg-card p-4 transition-shadow"
    :class="[
      clickable ? 'cursor-pointer hover:shadow-md' : '',
    ]"
    @click="clickable ? $emit('click') : undefined"
  >
    <div v-if="loading" class="flex items-center justify-center py-4">
      <div class="h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent" />
    </div>
    <template v-else>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs text-muted-foreground font-medium">{{ title }}</p>
          <p class="text-2xl font-bold mt-1">{{ formattedValue }}</p>
          <p v-if="subtitle" class="text-xs text-muted-foreground mt-1">{{ subtitle }}</p>
        </div>
        <div
          class="flex h-10 w-10 items-center justify-center rounded-full"
          :style="{ backgroundColor: color + '20' }"
        >
          <component :is="resolvedIcon" :size="20" :style="{ color }" />
        </div>
      </div>
      <!-- Trend indicator -->
      <div v-if="trend !== null" class="flex items-center gap-1 mt-2 text-xs">
        <TrendingUp v-if="trend > 0" :size="14" class="text-green-500" />
        <TrendingDown v-else-if="trend < 0" :size="14" class="text-red-500" />
        <span :class="trend > 0 ? 'text-green-500' : trend < 0 ? 'text-red-500' : 'text-muted-foreground'">
          {{ Math.abs(trend).toFixed(1) }}%
        </span>
      </div>
    </template>
  </div>
</template>
```

**Keep all computed logic** (formattedValue, resolvedIcon).

**Commit:**
```bash
git add frontend/src/components/admin/AdminStatsCard.vue
git commit -m "feat(07-01): migrate AdminStatsCard to Tailwind card"
```
</task>

<task id="3" depends_on="1">
### Task 3: Migrate DataSourceProgress.vue

**Files:** Modify `frontend/src/components/DataSourceProgress.vue`

**Key replacements:**
- `v-card` → Card
- `v-expand-transition` → Collapsible
- `v-chip` → Badge
- `v-tooltip` → Tooltip
- `v-btn` → Button
- `v-list`/`v-list-item` → styled divs
- `v-progress-linear` → Progress from shadcn-vue
- `v-spacer` → `flex-1`

**Template pattern:**
```vue
<Card>
  <Collapsible v-model:open="isExpanded">
    <CardHeader class="flex flex-row items-center justify-between p-4">
      <div class="flex items-center gap-2">
        <CardTitle class="text-base">Pipeline Progress</CardTitle>
        <Badge :variant="summaryVariant">{{ summaryText }}</Badge>
      </div>
      <div class="flex items-center gap-1">
        <TooltipProvider>
          <Tooltip>
            <TooltipTrigger as-child>
              <Button variant="ghost" size="icon" class="h-8 w-8" @click="refreshStatus">
                <RefreshCw :size="14" :class="{ 'animate-spin': isRefreshing }" />
              </Button>
            </TooltipTrigger>
            <TooltipContent>Refresh status</TooltipContent>
          </Tooltip>
        </TooltipProvider>
        <CollapsibleTrigger as-child>
          <Button variant="ghost" size="icon" class="h-8 w-8">
            <ChevronDown :size="14" :class="{ 'rotate-180': isExpanded }" class="transition-transform" />
          </Button>
        </CollapsibleTrigger>
      </div>
    </CardHeader>
    <CollapsibleContent>
      <CardContent class="pt-0">
        <div class="space-y-3">
          <div v-for="source in allSources" :key="source.name" class="rounded-md border p-3">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <div
                  class="h-2 w-2 rounded-full"
                  :style="{ backgroundColor: getStatusColor(source.status) }"
                />
                <span class="text-sm font-medium">{{ source.display_name }}</span>
              </div>
              <div class="flex items-center gap-2">
                <Badge variant="outline" class="text-xs">{{ source.status }}</Badge>
                <!-- Action button -->
                <Button
                  v-if="source.status === 'idle' || source.status === 'failed'"
                  variant="ghost" size="icon" class="h-6 w-6"
                  @click="triggerSource(source.name)"
                >
                  <Play :size="12" />
                </Button>
              </div>
            </div>
            <!-- Progress bar -->
            <Progress v-if="source.status === 'running'" :model-value="source.progress ?? 0" class="h-2" />
            <!-- Stats row -->
            <div v-if="source.items_added || source.items_updated || source.items_failed" class="flex gap-3 mt-2 text-xs">
              <span v-if="source.items_added" class="text-green-500">+{{ source.items_added }}</span>
              <span v-if="source.items_updated" class="text-blue-500">~{{ source.items_updated }}</span>
              <span v-if="source.items_failed" class="text-red-500">!{{ source.items_failed }}</span>
            </div>
          </div>
        </div>
      </CardContent>
    </CollapsibleContent>
  </Collapsible>
</Card>
```

**Keep all WebSocket logic, polling, and state management unchanged.** Only replace the template and component imports.

**Commit:**
```bash
git add frontend/src/components/DataSourceProgress.vue
git commit -m "feat(07-01): migrate DataSourceProgress to Card + Collapsible + Progress"
```
</task>

<task id="4" depends_on="2,3">
### Task 4: Migrate AdminDashboard.vue

**Files:** Modify `frontend/src/views/admin/AdminDashboard.vue`

**Key replacements:**
- `v-container` → Tailwind container
- `v-card` → Card
- `v-row`/`v-col` → Tailwind grid
- `v-btn` → Button
- `v-divider` → Separator
- `v-chip` → Badge

**Admin module card pattern:**
```vue
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <Card
    v-for="module in adminModules"
    :key="module.title"
    class="cursor-pointer hover:shadow-md transition-shadow"
    @click="router.push(module.route)"
  >
    <CardHeader class="flex flex-row items-center gap-3 pb-2">
      <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10">
        <component :is="module.icon" :size="20" class="text-primary" />
      </div>
      <div>
        <CardTitle class="text-base">{{ module.title }}</CardTitle>
        <CardDescription class="text-xs">{{ module.description }}</CardDescription>
      </div>
    </CardHeader>
    <CardContent>
      <ul class="text-xs text-muted-foreground space-y-1">
        <li v-for="feature in module.features" :key="feature">{{ feature }}</li>
      </ul>
    </CardContent>
  </Card>
</div>
```

**Stats row** uses `AdminStatsCard` (already migrated in Task 2).

**Quick actions row:**
```vue
<div class="flex flex-wrap gap-2">
  <Button v-for="action in quickActions" :key="action.label" variant="outline" size="sm" @click="action.handler">
    <component :is="action.icon" :size="14" class="mr-2" />
    {{ action.label }}
  </Button>
</div>
```

**Commit:**
```bash
git add frontend/src/views/admin/AdminDashboard.vue
git commit -m "feat(07-01): migrate AdminDashboard to Card grid + Tailwind"
```
</task>

<task id="5" depends_on="4">
### Task 5: Verification

```bash
cd frontend && npm run build && npm run lint
```

**Vuetify audit:**
```bash
grep -rE "v-card|v-container|v-row|v-col|v-chip|v-btn|v-divider|v-progress-circular|v-expand-transition|v-progress-linear|v-list|v-tooltip|v-spacer" \
  frontend/src/components/admin/AdminStatsCard.vue \
  frontend/src/components/DataSourceProgress.vue \
  frontend/src/views/admin/AdminDashboard.vue
```
Expected: 0 matches.

**Visual:** Admin dashboard renders with stats, module cards, quick actions. Pipeline progress shows WebSocket updates.
</task>
