---
phase: "08"
plan: "08-03"
title: "NetworkGraph and NetworkAnalysis pages"
wave: 3
depends_on: ["08-02"]
files_modified:
  - "frontend/src/components/network/NetworkGraph.vue"
  - "frontend/src/views/NetworkAnalysis.vue"
autonomous: true
estimated_minutes: 90
requirements:
  - "VIZ-07: NetworkGraph uses Card + Select + Button + Badge"
  - "VIZ-08: NetworkAnalysis uses Card + Select + Input + Breadcrumb"

must_haves:
  truths:
    - "Both files have zero Vuetify imports and zero Vuetify component tags"
    - "`npm run build` succeeds"
    - "`npm run lint` has 0 errors"
    - "Network graph renders PPI network with all layout options"
    - "Node coloring modes work (cluster, tier, expression)"
    - "Gene search with wildcard pattern matching works"
    - "Enrichment analysis section works"
    - "All Cytoscape.js logic is preserved unchanged"

---

# 08-03: NetworkGraph and NetworkAnalysis

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Migrate the two largest network components. NetworkGraph (1619 lines) is the most complex single file in the frontend.

**Critical:** Keep ALL Cytoscape.js logic, D3 tooltip logic, and WebSocket integration unchanged. Only replace the Vue template components and Vuetify imports.

---

<task id="1">
### Task 1: Migrate NetworkGraph.vue

**Files:** Modify `frontend/src/components/network/NetworkGraph.vue` (1619 lines)

**Replace `useTheme` import:**
```typescript
// REMOVE: import { useTheme } from 'vuetify'
// ADD: import { useAppTheme } from '@/composables/useAppTheme'
const { isDark } = useAppTheme()
// Replace all theme.global.current.value.dark → isDark.value
```

**Vuetify component replacements (template only):**
- `v-card` → Card
- `v-tooltip` → Tooltip
- `v-btn` → Button
- `v-menu` → DropdownMenu
- `v-list`/`v-list-item` → DropdownMenuItem
- `v-text-field` → Input
- `v-autocomplete` → Command/Combobox (for gene search)
- `v-chip`/`v-chip-group` → Badge / flex-wrap
- `v-select` → Select
- `v-checkbox` → Checkbox
- `v-progress-circular` → Tailwind spinner
- `v-tabs`/`v-tab`/`v-window`/`v-window-item` → Tabs
- `v-data-table` (stats) → simple styled table
- `v-slider` → Slider
- `v-stepper` → numbered steps div
- `v-expansion-panels` → Accordion
- `v-divider` → Separator
- All Vuetify utility classes → Tailwind

**Gene search autocomplete → Command:**
```vue
<Popover v-model:open="searchOpen">
  <PopoverTrigger as-child>
    <Button variant="outline" size="sm" class="w-full justify-start">
      <Search :size="14" class="mr-2" />
      {{ searchQuery || 'Search genes...' }}
    </Button>
  </PopoverTrigger>
  <PopoverContent class="w-[300px] p-0">
    <Command>
      <CommandInput v-model="searchQuery" placeholder="Gene symbol (* for wildcard)..." />
      <CommandList>
        <CommandEmpty>No matching genes.</CommandEmpty>
        <CommandGroup>
          <CommandItem v-for="gene in matchedGenes" :key="gene" :value="gene" @select="selectGene(gene)">
            {{ gene }}
          </CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  </PopoverContent>
</Popover>
```

**This is a large file** — work section by section through the template, replacing each Vuetify component while keeping all `@click` handlers, `v-model` bindings, and computed properties intact.

**Commit:**
```bash
git add frontend/src/components/network/NetworkGraph.vue
git commit -m "feat(08-03): migrate NetworkGraph to Card + Select + Command + Badge"
```
</task>

<task id="2" depends_on="1">
### Task 2: Migrate NetworkAnalysis.vue

**Files:** Modify `frontend/src/views/NetworkAnalysis.vue` (1120 lines)

**Key replacements:**
- `v-container` → Tailwind container
- `v-breadcrumbs` → Breadcrumb
- `v-card` → Card
- `v-select` (multiple, chips, closable) → Popover multi-select (same pattern as Dashboard)
- `v-text-field` → Input
- `v-btn` → Button
- `v-chip` → Badge
- `v-checkbox` → Checkbox
- `v-alert` → Alert
- `v-dialog` → Dialog
- `v-btn-toggle` → Button group
- `v-tooltip` → Tooltip
- `v-list-item` → DropdownMenuItem or styled div
- `v-spacer` → `flex-1`
- `v-divider` → Separator
- `v-row`/`v-col` → Tailwind grid

**Multi-select for gene sources/tiers** — same Popover + checkbox pattern used in Dashboard and GeneTable.

**Keep:** All API calls, URL state sync composable, HPO classification loading, network config defaults.

**Commit:**
```bash
git add frontend/src/views/NetworkAnalysis.vue
git commit -m "feat(08-03): migrate NetworkAnalysis to Card + Select + Breadcrumb"
```
</task>

<task id="3" depends_on="1,2">
### Task 3: Phase 08 Verification

```bash
cd frontend && npm run build && npm run lint
```

**Vuetify audit on ALL Phase 08 files:**
```bash
grep -rE "from 'vuetify'" \
  frontend/src/components/visualizations/ \
  frontend/src/components/network/ \
  frontend/src/views/NetworkAnalysis.vue \
  --include="*.vue"
```
Expected: 0 matches.

```bash
grep -rE "v-card|v-btn|v-chip|v-select|v-text-field|v-tooltip|v-menu|v-dialog|v-tabs|v-slider|v-checkbox|v-autocomplete|v-data-table|v-progress|v-container|v-row|v-col|v-divider|v-spacer|v-list|v-alert|v-expansion|v-stepper|v-overlay|v-chip-group|v-btn-group|v-btn-toggle|v-window|v-breadcrumbs|v-badge|v-navigation-drawer" \
  frontend/src/components/visualizations/ \
  frontend/src/components/network/ \
  frontend/src/views/NetworkAnalysis.vue \
  --include="*.vue"
```
Expected: 0 matches.

**Visual verification:**
- `/network` — network analysis page loads
- Gene selection, network construction work
- Graph renders with Cytoscape.js
- All coloring modes work
- Search with wildcards works
- Cluster detection works
- Enrichment table works
- All D3 charts render in light/dark mode
- Gene structure visualization controls work
</task>
