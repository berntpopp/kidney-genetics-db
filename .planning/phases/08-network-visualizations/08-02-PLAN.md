---
phase: "08"
plan: "08-02"
title: "Visualization controls + Network support components"
wave: 2
depends_on: ["08-01"]
files_modified:
  - "frontend/src/components/visualizations/GeneStructureVisualization.vue"
  - "frontend/src/components/visualizations/ProteinDomainVisualization.vue"
  - "frontend/src/components/network/NetworkSearchOverlay.vue"
  - "frontend/src/components/network/ClusterDetailsDialog.vue"
autonomous: true
estimated_minutes: 50
requirements:
  - "VIZ-04: GeneStructure/ProteinDomain use ToggleGroup + Button group"
  - "VIZ-05: NetworkSearchOverlay uses Input + Card"
  - "VIZ-06: ClusterDetailsDialog uses Dialog + DataTable"

must_haves:
  truths:
    - "All 4 files have zero Vuetify imports and zero Vuetify component tags"
    - "`npm run build` succeeds"
    - "`npm run lint` has 0 errors"
    - "Variant classification filter toggles work in both visualizations"
    - "Zoom controls work in both visualizations"
    - "Network search highlights matching nodes"
    - "Cluster details dialog shows gene table with HPO stats"

---

# 08-02: Visualization Controls + Network Support

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

---

<task id="1">
### Task 1: Install toggle-group (if not already)

```bash
ls frontend/src/components/ui/toggle-group/ 2>/dev/null || (cd frontend && npx shadcn-vue@latest add toggle-group toggle)
```

**Commit if installed.**
</task>

<task id="2" depends_on="1">
### Task 2: Migrate GeneStructureVisualization + ProteinDomainVisualization

**Files:**
- `frontend/src/components/visualizations/GeneStructureVisualization.vue` (760 lines)
- `frontend/src/components/visualizations/ProteinDomainVisualization.vue` (775 lines)

Both follow the same pattern:

1. Replace `import { useTheme } from 'vuetify'` → `import { useAppTheme } from '@/composables/useAppTheme'`
2. Replace `v-chip-group` (multiple, filter) → ToggleGroup or flex-wrap Badge toggles
3. Replace `v-chip` (filter chips) → Toggle or clickable Badge
4. Replace `v-btn-group` (zoom controls) → inline-flex button group

**Filter chips replacement:**
```vue
<!-- v-chip-group with multiple selection → clickable badges -->
<div class="flex flex-wrap gap-1">
  <Badge
    v-for="filter in classificationFilters"
    :key="filter.value"
    :variant="selectedFilters.includes(filter.value) ? 'default' : 'outline'"
    class="cursor-pointer"
    :style="selectedFilters.includes(filter.value) ? { backgroundColor: filter.color, color: 'white' } : {}"
    @click="toggleFilter(filter.value)"
  >
    {{ filter.label }}
  </Badge>
</div>
```

**Zoom controls:**
```vue
<div class="inline-flex rounded-md border">
  <Button variant="ghost" size="icon" class="h-8 w-8 rounded-none rounded-l-md" :disabled="!canZoomIn" @click="zoomIn">
    <ZoomIn :size="14" />
  </Button>
  <Button variant="ghost" size="icon" class="h-8 w-8 rounded-none" @click="resetZoom">
    <SearchX :size="14" />
  </Button>
  <Button variant="ghost" size="icon" class="h-8 w-8 rounded-none rounded-r-md" :disabled="!canZoomOut" @click="zoomOut">
    <ZoomOut :size="14" />
  </Button>
</div>
```

**Keep ALL D3 rendering, zoom behavior, and SVG logic unchanged.**

**Commit:**
```bash
git add frontend/src/components/visualizations/GeneStructureVisualization.vue \
  frontend/src/components/visualizations/ProteinDomainVisualization.vue
git commit -m "feat(08-02): migrate GeneStructure/ProteinDomain viz controls to Badge + Button"
```
</task>

<task id="3">
### Task 3: Migrate NetworkSearchOverlay + ClusterDetailsDialog

**NetworkSearchOverlay:**
- `v-card` → `<div class="rounded-lg border bg-card p-3 shadow-md">`
- `v-text-field` → Input
- `v-chip` → Badge
- `v-btn` → Button
- `v-alert` → Alert

**ClusterDetailsDialog:**
- `v-dialog` → Dialog
- `v-card` → DialogContent
- `v-data-table` → DataTable (client-side for cluster genes)
- `v-chip` → Badge
- `v-tooltip` → Tooltip
- `v-select` → Select (per-page selector)
- `v-btn` → Button
- `v-row`/`v-col` → Tailwind grid

**Commit:**
```bash
git add frontend/src/components/network/NetworkSearchOverlay.vue \
  frontend/src/components/network/ClusterDetailsDialog.vue
git commit -m "feat(08-02): migrate NetworkSearchOverlay + ClusterDetailsDialog"
```
</task>

<task id="4" depends_on="2,3">
### Task 4: Verification

```bash
cd frontend && npm run build && npm run lint
```

```bash
grep -rE "from 'vuetify'|v-chip-group|v-btn-group|v-card|v-text-field|v-dialog|v-data-table|v-select|v-chip|v-btn|v-alert|v-tooltip|v-row|v-col" \
  frontend/src/components/visualizations/GeneStructureVisualization.vue \
  frontend/src/components/visualizations/ProteinDomainVisualization.vue \
  frontend/src/components/network/NetworkSearchOverlay.vue \
  frontend/src/components/network/ClusterDetailsDialog.vue
```
Expected: 0 matches.
</task>
