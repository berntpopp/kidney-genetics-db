---
phase: 03-app-shell-nav-auth-icons
task: 0
total_tasks: 5
status: between_plans
last_updated: 2026-02-28T13:31:26.553Z
---

<current_state>
Plan 03-02 (User Menu, Breadcrumbs, Dark Mode Toggle) is COMPLETE and committed.
Plan 03-03 (Auth Modals and Auth Pages) is next — NOT started yet.
We are between plans 2 and 3 of 5 in Phase 03.
</current_state>

<completed_work>

- Plan 03-01: App Shell, Layout, Toast Provider — Done (previous session, commit 271dad9)
- Plan 03-02: User Menu, Breadcrumbs, Dark Mode Toggle — Done (this session, commit 6dd40f6)
  - Task 1: Migrated UserMenu.vue from Vuetify v-menu to shadcn-vue DropdownMenu + Avatar + Badge
  - Task 2: Migrated AdminHeader.vue breadcrumbs from v-breadcrumbs to shadcn-vue Breadcrumb + TypeScript typed props
  - Task 3: Verified build, lint, zero Vuetify refs — all pass
- Docker config fixes (also in commit 6dd40f6):
  - Fixed port mapping: 3000:80 → 3000:8080 (nginx listens on 8080)
  - Added network alias `kidney_genetics_backend` for nginx upstream resolution
  - Fixed nginx PID path sed pattern for nginx 1.29 (/run/ vs /var/run/)
  - Consolidated API URL config: single source of truth via config.ts + VITE_API_BASE_URL
  - Fixed double /api/ prefix in Docker by defaulting API_BASE_URL to empty string
  - Updated docker-compose.yml, Dockerfile, docker-entrypoint.sh, ci.yml, .env.example
</completed_work>

<remaining_work>

- Plan 03-03: Auth Modals and Auth Pages (5 tasks — large plan)
  - Task 1: Rewrite LoginModal.vue with Dialog + vee-validate + Zod
  - Task 2: Wire LoginModal into AppHeader.vue (v-model:open + toast on success)
  - Task 3: Rewrite ForgotPasswordModal.vue with Dialog + vee-validate + Zod
  - Task 4: Rewrite ChangePasswordModal.vue with Dialog + Form + password complexity checklist
  - Task 5: Rewrite standalone Login.vue and ForgotPassword.vue pages
- Plan 03-04: Toast/Snackbar Replacement (vue-sonner)
- Plan 03-05: Icon Migration (MDI → Lucide)
</remaining_work>

<decisions_made>

- API URL consolidation: Unified to single env var VITE_API_BASE_URL (was split between VITE_API_URL and VITE_API_BASE_URL). config.ts is now single source of truth, client.ts imports from it.
- Docker defaults: API_BASE_URL defaults to empty string in docker-entrypoint.sh (same-origin, nginx proxies /api/). Dev uses VITE_API_BASE_URL=http://localhost:8000.
- AdminHeader.vue keeps v-icon for MDI icon prop (callers pass MDI strings) — deferred to Phase 7 with TODO comment.
- WebSocket URL in websocket.ts refactored to use window._env_.WS_URL in Docker, falls back to VITE_API_BASE_URL in dev.
- All previous decisions from 03-01 session still apply (see completed .continue-here.md history)
</decisions_made>

<blockers>
- None. All work is clean and committed.
</blockers>

<context>
This is Phase 03 of the v0.2.0 frontend migration (Vuetify → shadcn-vue/Tailwind). Plans 03-01 and 03-02 covered the app shell layout, nav, user menu, breadcrumbs, and dark mode toggle. The next plan (03-03) is the largest — 5 tasks covering all auth modals and standalone auth pages. It requires vee-validate + Zod forms with the controlled Dialog pattern (parent controls open/close via v-model:open). All shadcn-vue components and validation libraries are already installed from 03-01. The plan file at .planning/phases/03-app-shell-nav-auth-icons/03-03-PLAN.md contains complete replacement code for each component.
</context>

<next_action>
Start with: Execute 03-03-PLAN.md using /superpowers:execute-plan. Read the plan, create tasks, and execute in batches. The plan contains complete replacement Vue files for all 5 tasks.
</next_action>
