---
phase: "03"
plan: "03-05"
title: "Icon Replacement — All v-icon to Lucide"
wave: 3
depends_on: ["03-01"]
files_modified:
  - "frontend/src/utils/icons.ts"
  - "frontend/src/utils/adminIcons.ts"
  - "frontend/src/utils/evidenceTiers.ts"
  - "frontend/src/App.vue"
  - "frontend/src/views/About.vue"
  - "frontend/src/views/Home.vue"
  - "frontend/src/views/Genes.vue"
  - "frontend/src/views/GeneDetail.vue"
  - "frontend/src/views/GeneStructure.vue"
  - "frontend/src/views/Dashboard.vue"
  - "frontend/src/views/DataSources.vue"
  - "frontend/src/views/Profile.vue"
  - "frontend/src/views/NetworkAnalysis.vue"
  - "frontend/src/views/admin/*.vue"
  - "frontend/src/components/evidence/*.vue"
  - "frontend/src/components/network/*.vue"
  - "frontend/src/components/admin/*.vue"
  - "frontend/src/components/gene/*.vue"
  - "frontend/src/components/DataSourceProgress.vue"
  - "frontend/src/components/visualizations/*.vue"
  - "frontend/src/utils/__tests__/icons.spec.ts"
autonomous: true
estimated_minutes: 45
requirements:
  - "ICON-01"
  - "ICON-02"
  - "ICON-03"
  - "ICON-04"
  - "TEST-02"

must_haves:
  truths:
    - "`grep -rn '<v-icon' frontend/src/` returns zero results after all tasks complete"
    - "`src/utils/icons.ts` exports a complete MdiToLucide mapping (198 entries from Phase 1 audit)"
    - "`adminIcons.ts` exports `Record<string, Component>` with Lucide component references (not mdi-* strings)"
    - "All Lucide icon imports are named per-file (no `import *` from lucide-vue-next)"
    - "Vuetify component props (`prepend-icon`, `append-icon`, `:icon` on v-btn/v-text-field/v-select) are left unchanged — they migrate with their parent components in Phases 4-8"
    - "Color inheritance works via `currentColor` — no explicit color props needed on Lucide icons"
    - "evidenceTiers.ts icon fields export Lucide component references instead of mdi-* strings"
    - "Vitest tests for icons.ts mapping module pass"
    - "`npm run build` and `npm run lint` pass with zero errors"
  artifacts:
    - path: "frontend/src/utils/icons.ts"
      provides: "Complete MDI-to-Lucide mapping module (198 entries) + re-exported Lucide components"
    - path: "frontend/src/utils/adminIcons.ts"
      provides: "Admin icon registry exporting Lucide components instead of mdi-* strings"
    - path: "frontend/src/utils/evidenceTiers.ts"
      provides: "Tier/group configs with Lucide component references in icon fields"
    - path: "frontend/src/utils/__tests__/icons.spec.ts"
      provides: "Vitest tests verifying icon mapping completeness and component validity"
  key_links:
    - from: "frontend/src/utils/icons.ts"
      to: "lucide-vue-next"
      via: "named imports of all 198 mapped Lucide components"
    - from: "frontend/src/utils/adminIcons.ts"
      to: "frontend/src/utils/icons.ts"
      via: "imports Lucide components for admin section icons"
    - from: "frontend/src/utils/evidenceTiers.ts"
      to: "lucide-vue-next"
      via: "imports Lucide components for tier/group icon fields"
    - from: "all 64 files with v-icon"
      to: "lucide-vue-next"
      via: "direct named imports per file replacing v-icon tags"
---

# Plan 03-05: Icon Replacement — All v-icon to Lucide

## Context

This plan replaces ALL 303 `<v-icon>` tags across 64 files with direct Lucide component imports. It creates the centralized `src/utils/icons.ts` mapping module (198 entries from the Phase 1 icon audit), updates `adminIcons.ts` and `evidenceTiers.ts` to export Lucide components instead of mdi-* strings, and writes Vitest tests for the icon utilities.

**Scope boundary:** Only `<v-icon>` tags in templates are replaced. Vuetify component props (`prepend-icon="mdi-*"`, `append-icon="mdi-*"`, `:icon="mdi-*"` on `v-btn`, `v-text-field`, `v-select`, etc.) are left unchanged — those props are part of the Vuetify API and will be removed when the parent component migrates in Phases 4-8.

**Approach:** Direct Lucide imports per file. No bridge component. Each file gets only the specific Lucide imports it uses. Tree-shaking ensures only used icons are bundled.

Reference files:
- @.planning/phases/01-foundation-setup/01-icon-audit.md (complete 198-entry MDI-to-Lucide mapping)
- @.planning/phases/03-app-shell-nav-auth-icons/03-RESEARCH.md (Pattern 9: Icon Map Module)
- @frontend/src/utils/adminIcons.ts (current mdi-* string exports)
- @frontend/src/utils/evidenceTiers.ts (current mdi-* icon fields)

## Replacement Patterns

Every `<v-icon>` replacement follows one of these four patterns. Tasks reference these by number.

### Pattern A: Static icon (most common — ~250 occurrences)

```vue
<!-- BEFORE -->
<v-icon>mdi-magnify</v-icon>

<!-- AFTER -->
<Search class="size-5" />
```

Import: `import { Search } from 'lucide-vue-next'`

### Pattern B: Sized icon

```vue
<!-- BEFORE -->
<v-icon size="small">mdi-check</v-icon>
<v-icon size="x-small">mdi-circle</v-icon>
<v-icon size="large">mdi-alert</v-icon>
<v-icon size="x-large">mdi-dna</v-icon>
<v-icon size="16">mdi-chevron-right</v-icon>

<!-- AFTER -->
<Check class="size-4" />
<Circle class="size-3" />
<AlertTriangle class="size-6" />
<Dna class="size-8" />
<ChevronRight class="size-4" />
```

Size mapping table:

| v-icon size | Tailwind class | Pixels |
|-------------|---------------|--------|
| _(default)_ | `size-5` | 20px |
| `size="small"` | `size-4` | 16px |
| `size="x-small"` | `size-3` | 12px |
| `size="large"` | `size-6` | 24px |
| `size="x-large"` | `size-8` | 32px |
| `size="16"` | `size-4` | 16px |
| `size="20"` | `size-5` | 20px |
| `size="24"` | `size-6` | 24px |
| `size="32"` | `size-8` | 32px |

### Pattern C: Dynamic icon (via adminIcons or computed property)

```vue
<!-- BEFORE -->
<v-icon :icon="item.icon" />
<v-icon>{{ item.icon }}</v-icon>

<!-- AFTER (item.icon is now a Lucide Component) -->
<component :is="item.icon" class="size-5" />
```

This pattern is used where `adminIcons.ts` or `evidenceTiers.ts` provides icon references. After Task 2 and Task 10 convert those modules to export Lucide components, consumers use Vue's `<component :is>` for dynamic rendering.

### Pattern D: Icon with color class

```vue
<!-- BEFORE -->
<v-icon color="error">mdi-alert-circle</v-icon>
<v-icon color="success">mdi-check-circle</v-icon>
<v-icon color="warning">mdi-alert</v-icon>
<v-icon color="primary">mdi-information</v-icon>

<!-- AFTER -->
<CircleAlert class="size-5 text-destructive" />
<CircleCheck class="size-5 text-green-600 dark:text-green-400" />
<AlertTriangle class="size-5 text-yellow-600 dark:text-yellow-400" />
<Info class="size-5 text-primary" />
```

Vuetify color prop to Tailwind class mapping:

| Vuetify `color=` | Tailwind class |
|-------------------|---------------|
| `error` / `red` | `text-destructive` |
| `success` / `green` | `text-green-600 dark:text-green-400` |
| `warning` / `orange` | `text-yellow-600 dark:text-yellow-400` |
| `primary` / `blue` | `text-primary` |
| `info` | `text-blue-600 dark:text-blue-400` |
| `grey` | `text-muted-foreground` |
| _(none)_ | _(inherits currentColor)_ |

## Tasks

<task id="1">
### Task 1: Create `src/utils/icons.ts` — MDI-to-Lucide Mapping Module

Create `frontend/src/utils/icons.ts` with the complete 198-entry mapping from the Phase 1 icon audit (`.planning/phases/01-foundation-setup/01-icon-audit.md`).

The module exports:
1. `MdiToLucide: Record<string, Component>` — maps every `mdi-*` string to its Lucide component
2. Re-exports all used Lucide components by name for direct import convenience
3. `resolveMdiIcon(mdiName: string): Component | null` — helper for dynamic resolution during coexistence

```typescript
// frontend/src/utils/icons.ts
import type { Component } from 'vue'
import {
  User, UserCheck, CircleUser, UserCog, Users, UserX, UserPlus, UserSearch,
  BriefcaseBusiness, AlertTriangle, CircleAlert, Code, ArrowLeft, SquareArrowLeft,
  ArrowRight, SquareArrowRight, Atom, BookOpen, Library, Eraser, RefreshCw,
  Calendar, CalendarCheck, CalendarClock, Ban, Award, ChartBar, ChartSpline,
  ChartBarBig, Donut, ChartLine, ChartScatter, Check, CheckCheck, CircleCheck,
  CircleCheckBig, BadgeCheck, ListChecks, ChevronDown, ChevronLeft, ChevronRight,
  ChevronUp, Circle, ClockAlert, AlarmClockCheck, Clock, Clock4, X, CircleX,
  OctagonX, Cloud, CloudUpload, FileJson, Filter, FilterX, SlidersHorizontal,
  Flame, Expand, Folder, List, MoveHorizontal, Github, Network, HardDrive,
  HeartPulse, CircleHelp, History, Home, Hospital, Building, Stethoscope, IdCard,
  Info, Lightbulb, Zap, Link, Lock, ShieldCheck, LockKeyholeOpen, KeyRound,
  LogIn, LogOut, Search, ZoomOut, ZoomIn, SearchX, MapPin, Route, BriefcaseMedical,
  MemoryStick, Merge, Microscope, CircleMinus, Package, Palette, Pause, Pencil,
  Minus, Workflow, Play, CirclePlay, Plus, LoaderCircle, Dna, Upload, Bot, Rocket,
  Ruler, SquareDashed, Server, Shapes, Share2, Shield, ShieldAlert, ShieldEllipsis,
  ArrowUpDown, Gauge, Star, Square, ArrowLeftRight, Tags, Target, TestTube,
  FileX, FileSearch, ScanSearch, TrendingDown, TrendingUp, LayoutDashboard,
  LayoutList, Bug, Moon, Sun, Globe, Wifi, WifiOff, Files, FileText, FileSpreadsheet,
  Settings, Hash, ExternalLink, Building2, Database, DatabaseBackup, DatabaseZap,
  Trash, Trash2, Mail, Eye, EyeOff, GitBranch, Download, Copy, PlayCircle,
  RefreshCcw, RotateCw, SortDesc, Cog, DatabaseOff,
} from 'lucide-vue-next'

export const MdiToLucide: Record<string, Component> = {
  'mdi-account': User,
  'mdi-account-check': UserCheck,
  'mdi-account-circle': CircleUser,
  'mdi-account-details': UserCog,
  'mdi-account-group': Users,
  'mdi-account-off': UserX,
  'mdi-account-plus': UserPlus,
  'mdi-account-search': UserSearch,
  'mdi-account-tie': BriefcaseBusiness,
  // ... all 198 entries from 01-icon-audit.md ...
}

/** Resolve an mdi-* string to a Lucide component (returns null if not found) */
export function resolveMdiIcon(mdiName: string): Component | null {
  return MdiToLucide[mdiName] ?? null
}

// Re-export all Lucide components for direct import convenience
export {
  User, UserCheck, CircleUser, /* ... all components ... */
} from 'lucide-vue-next'
```

Every entry from the Phase 1 audit table must be included. The `mdi-vuejs` entry is omitted (drop — decorative only).

**Verify:** `npm run build` passes. `import { MdiToLucide } from '@/utils/icons'` resolves.
</task>

<task id="2" depends_on="1">
### Task 2: Update `adminIcons.ts` to Export Lucide Components

Rewrite `frontend/src/utils/adminIcons.ts` to export Lucide component references instead of mdi-* strings.

```typescript
// frontend/src/utils/adminIcons.ts
import type { Component } from 'vue'
import {
  LayoutDashboard, Users, MemoryStick, FileText, Settings,
  Minus, Dna, Tags, Package, DatabaseBackup, DatabaseZap,
  RefreshCw, Play, Square, Trash2, Pencil, Plus,
  CircleCheck, CircleAlert, AlertTriangle, Info,
} from 'lucide-vue-next'

export const ADMIN_ICONS: Record<string, Component> = {
  dashboard: LayoutDashboard,
  users: Users,
  cache: MemoryStick,
  logs: FileText,
  settings: Settings,
  pipeline: Minus,
  staging: Dna,
  annotations: Tags,
  releases: Package,
  backups: DatabaseBackup,
  hybridSources: DatabaseZap,
  refresh: RefreshCw,
  play: Play,
  stop: Square,
  delete: Trash2,
  edit: Pencil,
  add: Plus,
  success: CircleCheck,
  error: CircleAlert,
  warning: AlertTriangle,
  info: Info,
}

/**
 * Get Tailwind text color class based on admin section.
 * Replaces Vuetify color string with Tailwind equivalent.
 */
export const getAdminIconColor = (section: string): string => {
  const colorMap: Record<string, string> = {
    dashboard: 'text-primary',
    users: 'text-primary',
    cache: 'text-purple-600 dark:text-purple-400',
    logs: 'text-orange-600 dark:text-orange-400',
    pipeline: 'text-green-600 dark:text-green-400',
    staging: 'text-red-600 dark:text-red-400',
    annotations: 'text-teal-600 dark:text-teal-400',
    releases: 'text-indigo-600 dark:text-indigo-400',
    backups: 'text-slate-600 dark:text-slate-400',
    settings: 'text-violet-600 dark:text-violet-400',
    hybridSources: 'text-cyan-600 dark:text-cyan-400',
  }
  return colorMap[section] ?? 'text-primary'
}

export default ADMIN_ICONS
```

**Update consumers of `ADMIN_ICONS`:** Search for all files that import from `@/utils/adminIcons`. In those files (AdminHeader, admin sidebar in admin views), replace:

```vue
<!-- BEFORE: string-based icon -->
<v-icon>{{ ADMIN_ICONS.dashboard }}</v-icon>
<!-- or -->
<v-icon :icon="ADMIN_ICONS[section]" />

<!-- AFTER: component-based icon -->
<component :is="ADMIN_ICONS.dashboard" class="size-5" />
<!-- or -->
<component :is="ADMIN_ICONS[section]" class="size-5" />
```

This is Pattern C from above. The icon prop on `AdminHeader.vue` changes from `icon?: string` to `icon?: Component` (update the TypeScript interface from 03-02).

**Verify:** `npm run build` passes. `grep 'mdi-' frontend/src/utils/adminIcons.ts` returns zero results.
</task>

<task id="3" depends_on="1">
### Task 3: Replace v-icon Tags in App.vue (9 usages)

Replace all `<v-icon>` tags in `frontend/src/App.vue`. Note: if 03-01 has already rewritten App.vue and eliminated v-icon tags in the process, verify and skip.

Check the current state of App.vue first:
```bash
grep -c '<v-icon' frontend/src/App.vue
```

If v-icon tags remain, apply Pattern A/B replacements. Common icons in App.vue include navigation icons (Menu, X, Sun, Moon) and footer-related icons. Add the corresponding Lucide imports to the `<script setup>` block.

**Verify:** `grep '<v-icon' frontend/src/App.vue` returns zero results.
</task>

<task id="4" depends_on="1">
### Task 4: Replace v-icon Tags in Auth Components

Files: `LoginModal.vue`, `ForgotPasswordModal.vue`, `ChangePasswordModal.vue`, `UserMenu.vue`

**Important:** Plans 03-02 and 03-03 may have already migrated these files to use Lucide icons. Check each file first:
```bash
grep -c '<v-icon' frontend/src/components/auth/*.vue
```

For any file that still has `<v-icon>` tags, apply the replacement patterns. Common auth icons:
- `mdi-login` -> `LogIn` (Pattern A)
- `mdi-eye` / `mdi-eye-off` -> `Eye` / `EyeOff` (Pattern A, password toggle)
- `mdi-lock` -> `Lock` (Pattern A)
- `mdi-email` -> `Mail` (Pattern A)
- `mdi-account` -> `User` (Pattern A)
- `mdi-check-circle` / `mdi-circle` -> `CheckCircle` / `Circle` (Pattern B, password checklist)

**Verify:** `grep -c '<v-icon' frontend/src/components/auth/*.vue` returns 0 for all files.
</task>

<task id="5" depends_on="1">
### Task 5: Replace v-icon Tags in Public Views (8 files)

**About.vue (34 usages — highest count):**
This view has the most v-icon tags. It includes icons for feature lists, technology stacks, and information sections. Apply Pattern A for most, Pattern B for sized icons, Pattern D for colored status icons. Add all needed Lucide imports.

**GeneStructure.vue (22 usages):**
Structure/hierarchy view with biology-related icons. Common: `mdi-dna` -> `Dna`, `mdi-protein` -> `Dna`, `mdi-chevron-right` -> `ChevronRight`, `mdi-information` -> `Info`.

**DataSources.vue (9 usages):**
Data source status icons. Common: `mdi-database` -> `Database`, `mdi-check-circle` -> `CircleCheck`, `mdi-alert-circle` -> `CircleAlert`, `mdi-refresh` -> `RefreshCw`.

**Profile.vue (6 usages):**
User profile icons. Common: `mdi-account` -> `User`, `mdi-email` -> `Mail`, `mdi-shield-check` -> `ShieldCheck`.

**Dashboard.vue (5 usages):**
Dashboard chart/stat icons. Common: `mdi-chart-bar` -> `ChartBar`, `mdi-view-dashboard` -> `LayoutDashboard`.

**GeneDetail.vue (4 usages):**
Gene detail page icons. Common: `mdi-dna` -> `Dna`, `mdi-open-in-new` -> `ExternalLink`.

**Home.vue (2 usages):**
Landing page icons. Apply Pattern A.

**Genes.vue (2 usages):**
Gene browser icons. Common: `mdi-magnify` -> `Search`, `mdi-filter` -> `Filter`.

For each file:
1. Count existing `<v-icon>` tags: `grep -c '<v-icon' <file>`
2. Identify each icon name and size/color props
3. Map to Lucide component using `01-icon-audit.md`
4. Add Lucide imports to `<script setup>`
5. Replace template tags using Pattern A/B/D as appropriate

**Verify:** `grep -c '<v-icon' frontend/src/views/{About,GeneStructure,DataSources,Profile,Dashboard,GeneDetail,Home,Genes}.vue` returns 0 for all files.
</task>

<task id="6" depends_on="1">
### Task 6: Replace v-icon Tags in Evidence Components (11 files)

Files in `frontend/src/components/evidence/`:
- `EvidenceCard.vue` (1 usage)
- `ClinGenEvidence.vue` (7 usages)
- `GenCCEvidence.vue` (3 usages)
- `HPOEvidence.vue` (1 usage)
- `PanelAppEvidence.vue` (3 usages)
- `DiagnosticPanelsEvidence.vue` (5 usages)
- `LiteratureEvidence.vue` (3 usages)
- `PubTatorEvidence.vue` (3 usages)
- `EvidenceTierBadge.vue` (1 usage)
- `TierHelpDialog.vue` (4 usages)
- `ScoreBreakdown.vue` (3 usages)

Evidence components frequently use Pattern D (colored status icons) for tier indicators and Pattern C (dynamic icons) when consuming `evidenceTiers.ts` config. After Task 10 updates `evidenceTiers.ts`, components that render `tierConfig.icon` use `<component :is="tierConfig.icon" />` instead of `<v-icon>{{ tierConfig.icon }}</v-icon>`.

Common evidence icons:
- `mdi-check-circle` -> `CircleCheck` (verified/confirmed)
- `mdi-alert-circle` -> `CircleAlert` (warning/issue)
- `mdi-information` -> `Info` (informational)
- `mdi-open-in-new` -> `ExternalLink` (external links)
- `mdi-book-open` -> `BookOpen` (literature)
- `mdi-hospital` -> `Hospital` (clinical)
- `mdi-dna` -> `Dna` (genetic)

For each file:
1. Replace static `<v-icon>mdi-*</v-icon>` with Lucide components (Pattern A/B/D)
2. Replace dynamic `<v-icon>{{ config.icon }}</v-icon>` with `<component :is="config.icon" />` (Pattern C)
3. Add Lucide imports to `<script setup>`

**Verify:** `grep -rn '<v-icon' frontend/src/components/evidence/` returns zero results.
</task>

<task id="7" depends_on="1">
### Task 7: Replace v-icon Tags in Network Components (5 files)

Files in `frontend/src/components/network/` and `frontend/src/views/`:
- `NetworkGraph.vue` (4 usages)
- `EnrichmentTable.vue` (2 usages)
- `ClusterDetailsDialog.vue` (4 usages)
- `NetworkSearchOverlay.vue` (1 usage)
- `NetworkAnalysis.vue` (8 usages — this is a view)

Common network icons:
- `mdi-graph` / `mdi-graph-outline` -> `Network` (graph visualization)
- `mdi-magnify` -> `Search` (search overlay)
- `mdi-fit-to-screen` -> `Expand` (fit graph)
- `mdi-magnify-plus-outline` / `mdi-magnify-minus-outline` -> `ZoomIn` / `ZoomOut`
- `mdi-refresh` -> `RefreshCw` (reload graph)
- `mdi-chart-scatter-plot` -> `ChartScatter` (scatter analysis)
- `mdi-close` -> `X` (close overlay)
- `mdi-filter` -> `Filter` (filter controls)

Apply Pattern A/B for all. Network icons are typically default size or small.

**Verify:** `grep -rn '<v-icon' frontend/src/components/network/ frontend/src/views/NetworkAnalysis.vue` returns zero results.
</task>

<task id="8" depends_on="2">
### Task 8: Replace v-icon Tags in Admin Components and Views (15+ files)

Files in `frontend/src/components/admin/` and `frontend/src/views/admin/`:

**Components:**
- `AdminHeader.vue` (3 usages) — uses dynamic `ADMIN_ICONS` via icon prop (Pattern C after Task 2)
- `AdminStatsCard.vue` (2 usages)
- `LogViewer.vue` (3 usages)

**Views:**
- `AdminDashboard.vue` (3 usages)
- `AdminPipeline.vue` (11 usages)
- `AdminAnnotations.vue` (16 usages — second highest count)
- `AdminGeneStaging.vue` (11 usages)
- `AdminHybridSources.vue` (13 usages)
- `AdminCacheManagement.vue` (3 usages)
- `AdminLogViewer.vue` (6 usages)
- `AdminReleases.vue` (5 usages)
- `AdminSettings.vue` (2 usages)
- `AdminBackups.vue` (1 usage)
- `AdminUserManagement.vue` (1 usage)
- Backup/settings dialog components (if any)

Admin views are icon-heavy due to action buttons and status indicators. Common patterns:
- Status icons: `mdi-check-circle` -> `CircleCheck`, `mdi-alert-circle` -> `CircleAlert`, `mdi-clock-outline` -> `Clock` (Pattern D with color)
- Action icons: `mdi-play` -> `Play`, `mdi-stop` -> `Square`, `mdi-refresh` -> `RefreshCw`, `mdi-delete` -> `Trash2` (Pattern A)
- Dynamic admin icons via `ADMIN_ICONS[section]` -> `<component :is="ADMIN_ICONS[section]" class="size-5" />` (Pattern C)
- Pipeline status: `mdi-progress-clock` -> `LoaderCircle`, `mdi-check-bold` -> `Check` (Pattern D)

For `AdminHeader.vue` specifically: the `icon` prop type changes from `string` to `Component` (imported from `vue`). Update the props interface:

```typescript
// BEFORE
icon?: string

// AFTER
icon?: Component
```

Template change:
```vue
<!-- BEFORE -->
<v-icon :color="iconColor">{{ icon }}</v-icon>

<!-- AFTER -->
<component :is="icon" class="size-6" :class="iconColorClass" />
```

**Verify:** `grep -rn '<v-icon' frontend/src/components/admin/ frontend/src/views/admin/` returns zero results.
</task>

<task id="9" depends_on="1">
### Task 9: Replace v-icon Tags in Remaining Components

**DataSourceProgress.vue (15 usages):**
Progress indicator component with status icons. Common: `mdi-check-circle` -> `CircleCheck` (complete), `mdi-alert-circle` -> `CircleAlert` (error), `mdi-progress-clock` -> `LoaderCircle` (in-progress), `mdi-clock-outline` -> `Clock` (pending). Heavy use of Pattern D (colored status).

**GeneTable.vue (5 usages):**
Gene list table. Common: `mdi-sort` -> `ArrowUpDown`, `mdi-chevron-right` -> `ChevronRight`, `mdi-open-in-new` -> `ExternalLink`.

**Visualization components** (if any have v-icon):
Check `frontend/src/components/visualizations/` for any remaining v-icon tags.

**Any other files not covered above:**
Run a final sweep:
```bash
grep -rn '<v-icon' frontend/src/ --include='*.vue' --include='*.ts'
```

Replace every remaining occurrence using the appropriate pattern.

**Verify:** `grep -rn '<v-icon' frontend/src/ --include='*.vue'` returns zero results globally.
</task>

<task id="10" depends_on="1">
### Task 10: Update evidenceTiers.ts Icon References

Rewrite the `icon` fields in `frontend/src/utils/evidenceTiers.ts` to export Lucide component references instead of mdi-* strings.

**Type changes:**

```typescript
// BEFORE
export interface TierConfig {
  label: string
  color: string
  icon: string        // mdi-* string
  description: string
}

// AFTER
import type { Component } from 'vue'

export interface TierConfig {
  label: string
  color: string
  icon: Component     // Lucide component
  description: string
}
```

Same change for `GroupConfig`.

**TIER_CONFIG updates:**

```typescript
import {
  CircleCheck, CircleCheckBig, Check, CircleAlert, Info, Star, CircleHelp,
} from 'lucide-vue-next'

export const TIER_CONFIG: Record<TierName, TierConfig> = {
  comprehensive_support: {
    label: 'Comprehensive Support',
    color: 'success',
    icon: CircleCheck,               // was 'mdi-check-circle'
    description: '4+ sources with robust evidence (score >= 50%)',
  },
  multi_source_support: {
    label: 'Multi-Source Support',
    color: 'info',
    icon: CircleCheckBig,            // was 'mdi-check-circle-outline'
    description: '3+ sources with emerging evidence (score >= 35%)',
  },
  established_support: {
    label: 'Established Support',
    color: 'primary',
    icon: Check,                     // was 'mdi-check'
    description: '2+ sources with moderate evidence (score >= 20%)',
  },
  preliminary_evidence: {
    label: 'Preliminary Evidence',
    color: 'warning',
    icon: CircleAlert,               // was 'mdi-alert-circle-outline'
    description: 'Initial evidence requiring validation (score >= 10%)',
  },
  minimal_evidence: {
    label: 'Minimal Evidence',
    color: 'grey',
    icon: Info,                      // was 'mdi-information-outline'
    description: 'Limited early-stage evidence (score < 10%)',
  },
}
```

**GROUP_CONFIG updates:**

```typescript
export const GROUP_CONFIG: Record<GroupName, GroupConfig> = {
  well_supported: {
    label: 'Well-Supported',
    color: 'success',
    icon: Star,                      // was 'mdi-star'
    description: '2+ sources with strong evidence scores',
  },
  emerging_evidence: {
    label: 'Emerging Evidence',
    color: 'warning',
    icon: Star,                      // was 'mdi-star-outline' (Lucide Star is stroke-only by default)
    description: 'Initial evidence, needs further validation',
  },
}
```

**Update fallback returns** in `getTierConfig` and `getGroupConfig`:

```typescript
// BEFORE
icon: 'mdi-help-circle-outline'

// AFTER
icon: CircleHelp
```

**Verify:** `grep 'mdi-' frontend/src/utils/evidenceTiers.ts` returns zero results. `npm run build` passes (consumers of TierConfig.icon now receive Component, not string).
</task>

<task id="11" depends_on="1">
### Task 11: Write Vitest Tests for icons.ts Mapping Module (TEST-02)

Create `frontend/src/utils/__tests__/icons.spec.ts`:

```typescript
import { describe, it, expect } from 'vitest'
import { MdiToLucide, resolveMdiIcon } from '@/utils/icons'

describe('icons.ts — MDI to Lucide mapping', () => {
  it('exports MdiToLucide with at least 190 entries', () => {
    const count = Object.keys(MdiToLucide).length
    expect(count).toBeGreaterThanOrEqual(190)
  })

  it('every key starts with "mdi-"', () => {
    for (const key of Object.keys(MdiToLucide)) {
      expect(key).toMatch(/^mdi-/)
    }
  })

  it('every value is a valid Vue component (object or function)', () => {
    for (const [key, value] of Object.entries(MdiToLucide)) {
      expect(
        typeof value === 'object' || typeof value === 'function',
        `${key} should map to a component, got ${typeof value}`
      ).toBe(true)
    }
  })

  it('resolves known icons correctly', () => {
    expect(resolveMdiIcon('mdi-account')).toBeTruthy()
    expect(resolveMdiIcon('mdi-dna')).toBeTruthy()
    expect(resolveMdiIcon('mdi-magnify')).toBeTruthy()
    expect(resolveMdiIcon('mdi-check')).toBeTruthy()
  })

  it('returns null for unknown icons', () => {
    expect(resolveMdiIcon('mdi-nonexistent-icon')).toBeNull()
    expect(resolveMdiIcon('')).toBeNull()
    expect(resolveMdiIcon('not-mdi')).toBeNull()
  })

  it('does not include mdi-vuejs (dropped icon)', () => {
    expect(MdiToLucide['mdi-vuejs']).toBeUndefined()
  })

  it('maps mdi-vuejs variants are absent', () => {
    expect(resolveMdiIcon('mdi-vuejs')).toBeNull()
  })
})
```

Also add a test for `adminIcons.ts`:

```typescript
import { describe, it, expect } from 'vitest'
import { ADMIN_ICONS } from '@/utils/adminIcons'

describe('adminIcons.ts — Lucide component exports', () => {
  it('exports all expected admin section icons', () => {
    const expectedKeys = [
      'dashboard', 'users', 'cache', 'logs', 'settings',
      'pipeline', 'staging', 'annotations', 'releases', 'backups',
      'hybridSources', 'refresh', 'play', 'stop', 'delete', 'edit',
      'add', 'success', 'error', 'warning', 'info',
    ]
    for (const key of expectedKeys) {
      expect(ADMIN_ICONS[key], `${key} should be defined`).toBeTruthy()
    }
  })

  it('every value is a Vue component (not an mdi-* string)', () => {
    for (const [key, value] of Object.entries(ADMIN_ICONS)) {
      expect(
        typeof value !== 'string',
        `${key} should not be a string — got "${value}"`
      ).toBe(true)
    }
  })
})
```

**Verify:** `cd frontend && npx vitest run src/utils/__tests__/icons.spec.ts` passes all tests.
</task>

<task id="12" depends_on="1,2,3,4,5,6,7,8,9,10,11">
### Task 12: Final Verification — Build, Lint, Zero v-icon References

Run the complete verification suite:

```bash
cd /home/bernt-popp/development/kidney-genetics-db/frontend

# 1. Zero v-icon tags remaining
grep -rn '<v-icon' src/ --include='*.vue' --include='*.ts'
# Expected: no output

# 2. Zero mdi-* strings in utility modules
grep -n 'mdi-' src/utils/adminIcons.ts src/utils/evidenceTiers.ts src/utils/icons.ts
# Expected: only icons.ts has mdi-* (as mapping keys), adminIcons and evidenceTiers have none

# 3. Build succeeds
npm run build
# Expected: zero errors

# 4. Lint passes
npm run lint
# Expected: zero errors

# 5. Tests pass
npx vitest run src/utils/__tests__/icons.spec.ts
# Expected: all tests pass

# 6. Verify Lucide imports are present in previously-icon-using files
grep -rl 'lucide-vue-next' src/ --include='*.vue' | wc -l
# Expected: at least 50 files (out of the 64 that had v-icon)
```

If any check fails, fix the issue before considering this task complete. Common fixes:
- Missing Lucide import in a file -> add the named import
- TypeScript error from `icon: Component` change -> update prop types in consuming components
- Lint error from unused mdi import -> remove it

**Verify:** All 6 checks above pass.
</task>

## Verification

- [ ] `grep -rn '<v-icon' frontend/src/ --include='*.vue'` returns zero results
- [ ] `grep -rn '<v-icon' frontend/src/ --include='*.ts'` returns zero results
- [ ] `frontend/src/utils/icons.ts` exists and exports `MdiToLucide` with 190+ entries
- [ ] `frontend/src/utils/adminIcons.ts` exports Lucide components (not mdi-* strings)
- [ ] `frontend/src/utils/evidenceTiers.ts` icon fields are Lucide components (not mdi-* strings)
- [ ] `npm run build` succeeds with zero errors
- [ ] `npm run lint` passes with zero errors
- [ ] `npx vitest run src/utils/__tests__/icons.spec.ts` passes all tests
- [ ] No `import *` from `lucide-vue-next` anywhere (tree-shaking preserved)
- [ ] Vuetify component props (`prepend-icon`, `append-icon`) are untouched

## must_haves

- `src/utils/icons.ts` contains the complete 198-entry MdiToLucide mapping from Phase 1 audit
- `adminIcons.ts` exports `Record<string, Component>` with Lucide components, not mdi-* strings
- `evidenceTiers.ts` TierConfig/GroupConfig icon fields are Lucide Component type, not string
- Every `<v-icon>` tag in all 64 files is replaced with a direct Lucide component import
- Sizing uses Tailwind classes: default=size-5, small=size-4, x-small=size-3, large=size-6, x-large=size-8
- Vuetify component props (prepend-icon, append-icon, :icon on v-btn/v-text-field) are left unchanged
- Vitest tests validate icon mapping completeness and component types
- `npm run build` + `npm run lint` pass with zero errors
