---
phase: "03"
plan: "03-04"
title: "Toast Replacement — All v-snackbar to vue-sonner"
wave: 3
depends_on: ["03-01"]
files_modified:
  - "frontend/src/views/admin/AdminAnnotations.vue"
  - "frontend/src/views/admin/AdminCacheManagement.vue"
  - "frontend/src/views/admin/AdminGeneStaging.vue"
  - "frontend/src/views/admin/AdminHybridSources.vue"
  - "frontend/src/views/admin/AdminLogViewer.vue"
  - "frontend/src/views/admin/AdminPipeline.vue"
  - "frontend/src/views/admin/AdminReleases.vue"
  - "frontend/src/views/admin/AdminUserManagement.vue"
  - "frontend/src/views/NetworkAnalysis.vue"
  - "frontend/src/composables/useNetworkUrlState.ts"
autonomous: true
estimated_minutes: 25
requirements:
  - "TFBK-02"
  - "TFBK-03"

must_haves:
  truths:
    - "Zero v-snackbar tags remain in the entire frontend/src/ directory"
    - "Zero showSnackbar helper functions remain in any file"
    - "All success notifications use toast.success() with duration 5000"
    - "All error notifications use toast.error() with duration Infinity"
    - "Warning/info notifications use toast.warning()/toast.info() with duration 5000"
    - "window.snackbar calls in useNetworkUrlState.ts are replaced with direct toast() imports"
    - "window.snackbar calls in NetworkAnalysis.vue are replaced with direct toast() imports"
    - "npm run build and npm run lint pass with zero errors"
  artifacts:
    - path: "frontend/src/views/admin/AdminAnnotations.vue"
      provides: "Toast notifications replacing v-snackbar for annotation pipeline management"
    - path: "frontend/src/views/admin/AdminCacheManagement.vue"
      provides: "Toast notifications replacing v-snackbar for cache management"
    - path: "frontend/src/views/admin/AdminGeneStaging.vue"
      provides: "Toast notifications replacing v-snackbar for gene staging review"
    - path: "frontend/src/views/admin/AdminHybridSources.vue"
      provides: "Toast notifications replacing v-snackbar for hybrid source management"
    - path: "frontend/src/views/admin/AdminLogViewer.vue"
      provides: "Toast notifications replacing v-snackbar for log viewer"
    - path: "frontend/src/views/admin/AdminPipeline.vue"
      provides: "Toast notifications replacing v-snackbar for pipeline control"
    - path: "frontend/src/views/admin/AdminReleases.vue"
      provides: "Toast notifications replacing v-snackbar for release management"
    - path: "frontend/src/views/admin/AdminUserManagement.vue"
      provides: "Toast notifications replacing v-snackbar for user management"
    - path: "frontend/src/views/NetworkAnalysis.vue"
      provides: "Toast notifications replacing v-snackbar for share feedback"
    - path: "frontend/src/composables/useNetworkUrlState.ts"
      provides: "Direct toast() imports replacing window.snackbar calls"
  key_links:
    - from: "all 10 modified files"
      to: "vue-sonner toast()"
      via: "import { toast } from 'vue-sonner'"
    - from: "frontend/src/App.vue"
      to: "vue-sonner Toaster"
      via: "Toaster provider mounted in 03-01 renders all toast() calls"
---

# Plan 03-04: Toast Replacement — All v-snackbar to vue-sonner

## Context

This plan replaces every `v-snackbar` usage and `window.snackbar` call across the codebase with direct `import { toast } from 'vue-sonner'` calls. The `<Toaster>` provider was mounted in App.vue during Plan 03-01, and the `window.snackbar` bridge was wired in `main.ts` during 03-01 as a temporary bridge. This plan eliminates both the Vuetify snackbar components AND the window.snackbar bridge dependency by moving all callers to direct imports.

There are two distinct patterns to replace:

**Pattern A — v-snackbar (9 admin/view files):** Each file has (1) reactive snackbar state, (2) a `showSnackbar()` helper, and (3) a `<v-snackbar>` template block. All three are removed and replaced with direct `toast()` calls at each call site.

**Pattern B — window.snackbar (2 network files):** `useNetworkUrlState.ts` and `NetworkAnalysis.vue` call `window.snackbar.success()` / `window.snackbar.error()`. These are replaced with direct `toast()` imports.

Reference files:
- @.planning/phases/03-app-shell-nav-auth-icons/03-RESEARCH.md (Pattern 8 — Toast System)
- @.planning/phases/03-app-shell-nav-auth-icons/2026-02-28-phase3-remaining-plans-design.md (Plan 03-04 section)
- @frontend/src/App.vue (Toaster provider from 03-01)
- @frontend/src/main.ts (window.snackbar bridge from 03-01)

## Tasks

<task id="1">
### Task 1: Admin Views Batch 1 — AdminAnnotations, AdminCacheManagement, AdminGeneStaging, AdminHybridSources

Apply the same transformation to each of these 4 files:

---

**1a. `frontend/src/views/admin/AdminAnnotations.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar
const snackbar = reactive({
  show: false,
  message: '',
  color: 'info'
})

const showSnackbar = (message, color = 'info') => {
  snackbar.message = message
  snackbar.color = color
  snackbar.show = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar for notifications -->
<v-snackbar v-model="snackbar.show" :color="snackbar.color" timeout="5000">
  {{ snackbar.message }}
  <template #actions>
    <v-btn icon="mdi-close" @click="snackbar.show = false" />
  </template>
</v-snackbar>
```

**Add import at top of `<script setup>`:**
```javascript
import { toast } from 'vue-sonner'
```

**Replace all `showSnackbar(...)` calls (19 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load annotation statistics', 'error')` | `toast.error('Failed to load annotation statistics', { duration: Infinity })` |
| `showSnackbar('Failed to load annotation sources', 'error')` | `toast.error('Failed to load annotation sources', { duration: Infinity })` |
| `showSnackbar('Failed to load pipeline status', 'error')` | `toast.error('Failed to load pipeline status', { duration: Infinity })` |
| `showSnackbar('Failed to load scheduled jobs', 'error')` | `toast.error('Failed to load scheduled jobs', { duration: Infinity })` |
| `showSnackbar('Please select at least one source for selective update', 'warning')` | `toast.warning('Please select at least one source for selective update', { duration: 5000 })` |
| `showSnackbar(\`Pipeline update scheduled: ${response.data.task_id}\`, 'success')` | `toast.success(\`Pipeline update scheduled: ${response.data.task_id}\`, { duration: 5000 })` |
| `showSnackbar('Failed to trigger pipeline update', 'error')` | `toast.error('Failed to trigger pipeline update', { duration: Infinity })` |
| `showSnackbar('Validation completed', 'success')` | `toast.success('Validation completed', { duration: 5000 })` |
| `showSnackbar('Failed to validate annotations', 'error')` | `toast.error('Failed to validate annotations', { duration: Infinity })` |
| `showSnackbar(response.data.message, 'success')` | `toast.success(response.data.message, { duration: 5000 })` |
| `showSnackbar('Failed to refresh materialized view', 'error')` | `toast.error('Failed to refresh materialized view', { duration: Infinity })` |
| `showSnackbar('Gene not found', 'error')` | `toast.error('Gene not found', { duration: Infinity })` |
| `showSnackbar('Failed to lookup gene annotations', 'error')` | `toast.error('Failed to lookup gene annotations', { duration: Infinity })` |
| `showSnackbar(\`Updating ${response.data.count} genes...\`, 'success')` | `toast.success(\`Updating ${response.data.count} genes missing ${sourceName} annotations\`, { duration: 5000 })` |
| `showSnackbar(\`Failed to update source ${sourceName}\`, 'error')` | `toast.error(\`Failed to update source ${sourceName}\`, { duration: Infinity })` |
| `showSnackbar('Pipeline paused successfully', 'success')` | `toast.success('Pipeline paused successfully', { duration: 5000 })` |
| `showSnackbar('Pipeline resumed successfully', 'success')` | `toast.success('Pipeline resumed successfully', { duration: 5000 })` |
| `showSnackbar(\`Retrying ${response.data.count} failed genes\`, 'info')` | `toast.info(\`Retrying ${response.data.count} failed genes\`, { duration: 5000 })` |
| `showSnackbar(\`Processing ${response.data.count} new genes\`, 'info')` | `toast.info(\`Processing ${response.data.count} new genes\`, { duration: 5000 })` |

All error `showSnackbar(msg, 'error')` calls with dynamic error messages (`error.message`) also become `toast.error(msg, { duration: Infinity })`.

---

**1b. `frontend/src/views/admin/AdminCacheManagement.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar
const snackbar = ref(false)
const snackbarText = ref('')
const snackbarColor = ref('success')

const showSnackbar = (text, color = 'success') => {
  snackbarText.value = text
  snackbarColor.value = color
  snackbar.value = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar -->
<v-snackbar v-model="snackbar" :color="snackbarColor" :timeout="3000" location="top">
  {{ snackbarText }}
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (11 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load cache statistics', 'error')` | `toast.error('Failed to load cache statistics', { duration: Infinity })` |
| `showSnackbar('Failed to load cache namespaces', 'error')` | `toast.error('Failed to load cache namespaces', { duration: Infinity })` |
| `showSnackbar('Health check completed', 'success')` | `toast.success('Health check completed', { duration: 5000 })` |
| `showSnackbar('Failed to check cache health', 'error')` | `toast.error('Failed to check cache health', { duration: Infinity })` |
| `showSnackbar('Cache warming initiated', 'success')` | `toast.success('Cache warming initiated', { duration: 5000 })` |
| `showSnackbar('Failed to warm cache', 'error')` | `toast.error('Failed to warm cache', { duration: Infinity })` |
| `showSnackbar(\`Namespace "${clearingNamespace.value.namespace}" cleared\`, 'success')` | `toast.success(\`Namespace "${clearingNamespace.value.namespace}" cleared\`, { duration: 5000 })` |
| `showSnackbar('All cache cleared successfully', 'success')` | `toast.success('All cache cleared successfully', { duration: 5000 })` |
| `showSnackbar('Failed to clear cache', 'error')` | `toast.error('Failed to clear cache', { duration: Infinity })` |
| `showSnackbar('Failed to load namespace details', 'error')` | `toast.error('Failed to load namespace details', { duration: Infinity })` |

---

**1c. `frontend/src/views/admin/AdminGeneStaging.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar
const snackbar = reactive({
  show: false,
  message: '',
  color: 'info'
})

const showSnackbar = (message, color = 'info') => {
  snackbar.message = message
  snackbar.color = color
  snackbar.show = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar for notifications -->
<v-snackbar v-model="snackbar.show" :color="snackbar.color" timeout="5000">
  {{ snackbar.message }}
  <template #actions>
    <v-btn icon="mdi-close" @click="snackbar.show = false" />
  </template>
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (8 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load statistics', 'error')` | `toast.error('Failed to load statistics', { duration: Infinity })` |
| `showSnackbar('Failed to load pending reviews', 'error')` | `toast.error('Failed to load pending reviews', { duration: Infinity })` |
| `showSnackbar('Gene staging approved successfully', 'success')` | `toast.success('Gene staging approved successfully', { duration: 5000 })` |
| `showSnackbar('Failed to approve gene staging', 'error')` | `toast.error('Failed to approve gene staging', { duration: Infinity })` |
| `showSnackbar('Gene staging rejected', 'success')` | `toast.success('Gene staging rejected', { duration: 5000 })` |
| `showSnackbar('Failed to reject gene staging', 'error')` | `toast.error('Failed to reject gene staging', { duration: Infinity })` |
| `showSnackbar('Bulk approve not yet implemented...', 'warning')` | `toast.warning('Bulk approve not yet implemented - please approve items individually', { duration: 5000 })` |
| `showSnackbar('Bulk reject not yet implemented...', 'warning')` | `toast.warning('Bulk reject not yet implemented - please reject items individually', { duration: 5000 })` |

---

**1d. `frontend/src/views/admin/AdminHybridSources.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar
const snackbar = ref(false)
const snackbarText = ref('')
const snackbarColor = ref('success')

const showSnackbar = (text, color = 'success') => {
  snackbarText.value = text
  snackbarColor.value = color
  snackbar.value = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar for notifications -->
<v-snackbar v-model="snackbar" :color="snackbarColor" :timeout="3000" location="top">
  {{ snackbarText }}
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (13 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load statistics', 'error')` | `toast.error('Failed to load statistics', { duration: Infinity })` |
| `showSnackbar('Failed to load upload history', 'error')` | `toast.error('Failed to load upload history', { duration: Infinity })` |
| `showSnackbar('Failed to load audit trail', 'error')` | `toast.error('Failed to load audit trail', { duration: Infinity })` |
| `showSnackbar('Failed to load identifiers', 'error')` | `toast.error('Failed to load identifiers', { duration: Infinity })` |
| `showSnackbar('File too large...', 'error')` | `toast.error('File too large. Maximum size is 50MB.', { duration: Infinity })` |
| `showSnackbar(\`Invalid file type...\`, 'error')` | `toast.error(\`Invalid file type. Supported: ${validExtensions.join(', ')}\`, { duration: Infinity })` |
| `showSnackbar('Upload successful!', 'success')` | `toast.success('Upload successful!', { duration: 5000 })` |
| `showSnackbar(\`Upload failed: ...\`, 'error')` | `toast.error(\`Upload failed: ${error.response?.data?.detail \|\| error.message}\`, { duration: Infinity })` |
| `showSnackbar('Successfully deleted', 'success')` | `toast.success('Successfully deleted', { duration: 5000 })` |
| `showSnackbar(\`Delete failed: ...\`, 'error')` | `toast.error(\`Delete failed: ${error.response?.data?.detail \|\| error.message}\`, { duration: Infinity })` |
| `showSnackbar('Upload marked as deleted', 'success')` | `toast.success('Upload marked as deleted', { duration: 5000 })` |
| `showSnackbar(\`Soft delete failed: ...\`, 'error')` | `toast.error(\`Soft delete failed: ${error.response?.data?.detail \|\| error.message}\`, { duration: Infinity })` |

**Verify after all 4 files:** `npm run build` succeeds.
</task>

<task id="2" depends_on="1">
### Task 2: Admin Views Batch 2 — AdminLogViewer, AdminPipeline, AdminReleases, AdminUserManagement

---

**2a. `frontend/src/views/admin/AdminLogViewer.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar
const snackbar = ref(false)
const snackbarText = ref('')
const snackbarColor = ref('success')

const showSnackbar = (text, color = 'success') => {
  snackbarText.value = text
  snackbarColor.value = color
  snackbar.value = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar -->
<v-snackbar v-model="snackbar" :color="snackbarColor" :timeout="3000" location="top">
  {{ snackbarText }}
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (7 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load logs', 'error')` | `toast.error('Failed to load logs', { duration: Infinity })` |
| `showSnackbar('Logs exported successfully', 'success')` | `toast.success('Logs exported successfully', { duration: 5000 })` |
| `showSnackbar('Failed to export logs', 'error')` | `toast.error('Failed to export logs', { duration: Infinity })` |
| `showSnackbar(\`Deleted ${data.logs_deleted \|\| 0} log entries\`, 'success')` | `toast.success(\`Deleted ${data.logs_deleted \|\| 0} log entries\`, { duration: 5000 })` |
| `showSnackbar('Failed to cleanup logs', 'error')` | `toast.error('Failed to cleanup logs', { duration: Infinity })` |
| `showSnackbar('Copied to clipboard', 'success')` | `toast.success('Copied to clipboard', { duration: 5000 })` |
| `showSnackbar('Failed to copy', 'error')` | `toast.error('Failed to copy', { duration: Infinity })` |

---

**2b. `frontend/src/views/admin/AdminPipeline.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar
const snackbar = ref(false)
const snackbarText = ref('')
const snackbarColor = ref('success')

const showSnackbar = (text, color = 'success') => {
  snackbarText.value = text
  snackbarColor.value = color
  snackbar.value = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar -->
<v-snackbar v-model="snackbar" :color="snackbarColor" :timeout="3000" location="top">
  {{ snackbarText }}
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (11 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load pipeline status', 'error')` | `toast.error('Failed to load pipeline status', { duration: Infinity })` |
| `showSnackbar(\`Started ${sourceName}\`, 'success')` | `toast.success(\`Started ${sourceName}\`, { duration: 5000 })` |
| `showSnackbar(\`Failed to start ${sourceName}\`, 'error')` | `toast.error(\`Failed to start ${sourceName}\`, { duration: Infinity })` |
| `showSnackbar(\`Paused ${sourceName}\`, 'success')` | `toast.success(\`Paused ${sourceName}\`, { duration: 5000 })` |
| `showSnackbar(\`Failed to pause ${sourceName}\`, 'error')` | `toast.error(\`Failed to pause ${sourceName}\`, { duration: Infinity })` |
| `showSnackbar(\`Resumed ${sourceName}\`, 'success')` | `toast.success(\`Resumed ${sourceName}\`, { duration: 5000 })` |
| `showSnackbar(\`Failed to resume ${sourceName}\`, 'error')` | `toast.error(\`Failed to resume ${sourceName}\`, { duration: Infinity })` |
| `showSnackbar('All data sources triggered', 'success')` | `toast.success('All data sources triggered', { duration: 5000 })` |
| `showSnackbar('Failed to trigger all data sources', 'error')` | `toast.error('Failed to trigger all data sources', { duration: Infinity })` |
| `showSnackbar(\`${data.source_name} started\`, 'info')` | `toast.info(\`${data.source_name} started\`, { duration: 5000 })` |
| `showSnackbar(\`${data.source_name} completed\`, 'success')` | `toast.success(\`${data.source_name} completed\`, { duration: 5000 })` |
| `showSnackbar(\`${data.source_name} failed\`, 'error')` | `toast.error(\`${data.source_name} failed\`, { duration: Infinity })` |

---

**2c. `frontend/src/views/admin/AdminReleases.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar state
const snackbar = ref(false)
const snackbarText = ref('')
const snackbarColor = ref('success')

const showSnackbar = (text, color = 'success') => {
  snackbarText.value = text
  snackbarColor.value = color
  snackbar.value = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar for notifications -->
<v-snackbar v-model="snackbar" :color="snackbarColor" :timeout="3000" location="top">
  {{ snackbarText }}
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (12 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Failed to load releases', 'error')` | `toast.error('Failed to load releases', { duration: Infinity })` |
| `showSnackbar(\`Release ${newRelease.version} created successfully\`, 'success')` | `toast.success(\`Release ${newRelease.version} created successfully\`, { duration: 5000 })` |
| `showSnackbar(error.message \|\| 'Failed to create release', 'error')` | `toast.error(error.message \|\| 'Failed to create release', { duration: Infinity })` |
| `showSnackbar(\`Release ${updated.version} updated successfully\`, 'success')` | `toast.success(\`Release ${updated.version} updated successfully\`, { duration: 5000 })` |
| `showSnackbar(error.message \|\| 'Failed to update release', 'error')` | `toast.error(error.message \|\| 'Failed to update release', { duration: Infinity })` |
| `showSnackbar(\`Release ${deletingRelease.value.version} deleted successfully\`, 'success')` | `toast.success(\`Release ${deletingRelease.value.version} deleted successfully\`, { duration: 5000 })` |
| `showSnackbar(error.message \|\| 'Failed to delete release', 'error')` | `toast.error(error.message \|\| 'Failed to delete release', { duration: Infinity })` |
| `showSnackbar(\`Release ${published.version} published successfully\`, 'success')` | `toast.success(\`Release ${published.version} published successfully\`, { duration: 5000 })` |
| `showSnackbar(error.message \|\| 'Failed to publish release', 'error')` | `toast.error(error.message \|\| 'Failed to publish release', { duration: Infinity })` |
| `showSnackbar(\`Export downloaded: ${release.version}\`, 'success')` | `toast.success(\`Export downloaded: ${release.version}\`, { duration: 5000 })` |
| `showSnackbar('Failed to download export', 'error')` | `toast.error('Failed to download export', { duration: Infinity })` |
| `showSnackbar('Copied to clipboard', 'success')` | `toast.success('Copied to clipboard', { duration: 5000 })` |
| `showSnackbar('Failed to copy to clipboard', 'error')` | `toast.error('Failed to copy to clipboard', { duration: Infinity })` |

---

**2d. `frontend/src/views/admin/AdminUserManagement.vue`**

**Remove from `<script setup>`:**
```javascript
// Snackbar state
const snackbar = ref(false)
const snackbarText = ref('')
const snackbarColor = ref('success')

const showSnackbar = (text, color = 'success') => {
  snackbarText.value = text
  snackbarColor.value = color
  snackbar.value = true
}
```

**Remove from `<template>`:**
```html
<!-- Snackbar for notifications -->
<v-snackbar v-model="snackbar" :color="snackbarColor" :timeout="3000" location="top">
  {{ snackbarText }}
</v-snackbar>
```

**Add import:** `import { toast } from 'vue-sonner'`

**Replace all `showSnackbar(...)` calls (9 call sites):**

| Old Call | New Call |
|----------|---------|
| `showSnackbar('Session expired. Please login again.', 'error')` | `toast.error('Session expired. Please login again.', { duration: Infinity })` |
| `showSnackbar('Failed to load users. Check if backend is running.', 'error')` | `toast.error('Failed to load users. Check if backend is running.', { duration: Infinity })` |
| `showSnackbar(\`User ${user.username} ${updated.is_active ? 'activated' : 'deactivated'}\`, 'success')` | `toast.success(\`User ${user.username} ${updated.is_active ? 'activated' : 'deactivated'}\`, { duration: 5000 })` |
| `showSnackbar('Failed to update user status', 'error')` | `toast.error('Failed to update user status', { duration: Infinity })` |
| `showSnackbar(\`User ${deletingUser.value.username} deleted\`, 'success')` | `toast.success(\`User ${deletingUser.value.username} deleted\`, { duration: 5000 })` |
| `showSnackbar('Failed to delete user', 'error')` | `toast.error('Failed to delete user', { duration: Infinity })` |
| `showSnackbar('User updated successfully', 'success')` | `toast.success('User updated successfully', { duration: 5000 })` |
| `showSnackbar('User created successfully', 'success')` | `toast.success('User created successfully', { duration: 5000 })` |
| `showSnackbar(error.response?.data?.detail \|\| 'Failed to save user', 'error')` | `toast.error(error.response?.data?.detail \|\| 'Failed to save user', { duration: Infinity })` |

**Verify after all 4 files:** `npm run build` succeeds.
</task>

<task id="3" depends_on="2">
### Task 3: Network Files — NetworkAnalysis.vue and useNetworkUrlState.ts

These two files use `window.snackbar` instead of `v-snackbar`. Replace with direct `toast()` imports.

---

**3a. `frontend/src/views/NetworkAnalysis.vue`**

**Remove from `<template>`:**
```html
<!-- Share Success Snackbar -->
<v-snackbar v-model="shareSnackbar" color="success" timeout="3000" location="bottom">
  <v-icon icon="mdi-check-circle" class="mr-2" />
  {{ shareSnackbarMessage }}
</v-snackbar>
```

**Remove from `<script setup>`:**
```javascript
// UI State (remove these two lines only)
const shareSnackbar = ref(false)
const shareSnackbarMessage = ref('')
```

**Add import at top of `<script setup>`:**
```javascript
import { toast } from 'vue-sonner'
```

**Replace window.snackbar calls in `applyRestoredState`:**

Old (line ~1016-1018):
```javascript
if (window.snackbar) {
  window.snackbar.error(`Failed to restore genes from URL: ${error.message}`)
}
```
New:
```javascript
toast.error(`Failed to restore genes from URL: ${error.message}`, { duration: Infinity })
```

Old (line ~1025-1027):
```javascript
if (window.snackbar) {
  window.snackbar.error('Failed to restore network state from URL')
}
```
New:
```javascript
toast.error('Failed to restore network state from URL', { duration: Infinity })
```

**Replace snackbar usage in `handleShareNetwork`:**

Old:
```javascript
if (success) {
  shareSnackbarMessage.value = 'Shareable URL copied to clipboard!'
  shareSnackbar.value = true
}
```
New:
```javascript
if (success) {
  toast.success('Shareable URL copied to clipboard!', { duration: 5000 })
}
```

---

**3b. `frontend/src/composables/useNetworkUrlState.ts`**

**Add import at top of file (after existing imports):**
```typescript
import { toast } from 'vue-sonner'
```

**Replace window.snackbar calls in `restoreStateFromUrl` (line ~139-142):**

Old:
```typescript
if (window.snackbar) {
  window.snackbar.error(`Failed to restore network state from URL: ${msg}`, {
    timeout: 5000
  })
}
```
New:
```typescript
toast.error(`Failed to restore network state from URL: ${msg}`, { duration: Infinity })
```

**Replace window.snackbar calls in `copyShareableUrl` (line ~297-299):**

Old:
```typescript
if (window.snackbar) {
  window.snackbar.success('Shareable URL copied to clipboard!')
}
```
New:
```typescript
toast.success('Shareable URL copied to clipboard!', { duration: 5000 })
```

Old (line ~305-307):
```typescript
if (window.snackbar) {
  window.snackbar.error('Failed to copy URL to clipboard')
}
```
New:
```typescript
toast.error('Failed to copy URL to clipboard', { duration: Infinity })
```

**Verify:** `npm run build` succeeds.
</task>

<task id="4" depends_on="3">
### Task 4: Verify Build, Lint, and Zero Remaining References

Run the following verification commands:

```bash
cd /home/bernt-popp/development/kidney-genetics-db/frontend

# Build must pass
npm run build

# Lint must pass
npm run lint

# Zero v-snackbar references anywhere in src/
grep -rn 'v-snackbar' src/
# Expected: zero results

# Zero showSnackbar helper functions
grep -rn 'showSnackbar' src/
# Expected: zero results

# Zero snackbarText/snackbarColor refs (the old pattern)
grep -rn 'snackbarText\|snackbarColor' src/
# Expected: zero results

# Zero window.snackbar usage (replaced with direct imports)
grep -rn 'window\.snackbar' src/views/ src/composables/
# Expected: zero results

# Confirm toast imports exist in all modified files
grep -rn "from 'vue-sonner'" src/views/admin/ src/views/NetworkAnalysis.vue src/composables/useNetworkUrlState.ts
# Expected: 10 matches (one per file)
```

**Note:** `window.snackbar` may still exist in `main.ts` (the bridge from 03-01) and `env.d.ts` (type declaration). Those are NOT removed in this plan -- they serve as a fallback for any remaining callers. They will be cleaned up in Phase 8 (Vuetify removal).

All checks must pass before this task is complete.
</task>

## Verification

- [ ] `npm run build` succeeds with zero errors
- [ ] `npm run lint` passes
- [ ] `grep -rn 'v-snackbar' frontend/src/` returns zero results
- [ ] `grep -rn 'showSnackbar' frontend/src/` returns zero results
- [ ] `grep -rn 'snackbarText\|snackbarColor' frontend/src/` returns zero results
- [ ] `grep -rn 'window\.snackbar' frontend/src/views/ frontend/src/composables/` returns zero results
- [ ] `grep -rn "from 'vue-sonner'" frontend/src/views/admin/ frontend/src/views/NetworkAnalysis.vue frontend/src/composables/useNetworkUrlState.ts` returns 10 matches
- [ ] Toast notifications render at bottom-right (via Toaster in App.vue from 03-01)
- [ ] Error toasts persist until dismissed (duration: Infinity)
- [ ] Success toasts auto-dismiss after 5 seconds (duration: 5000)

## must_haves

- Zero v-snackbar tags in entire frontend/src/ directory
- Zero showSnackbar helper functions in any file
- Zero snackbarText/snackbarColor reactive state in any file
- All 10 files import toast from vue-sonner directly
- Success notifications use toast.success() with duration 5000
- Error notifications use toast.error() with duration Infinity
- Warning notifications use toast.warning() with duration 5000
- Info notifications use toast.info() with duration 5000
- window.snackbar calls in useNetworkUrlState.ts replaced with direct toast() imports
- window.snackbar calls in NetworkAnalysis.vue replaced with direct toast() imports
- npm run build and npm run lint pass with zero errors
